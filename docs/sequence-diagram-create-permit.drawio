<mxfile host="app.diagrams.net" modified="2026-01-30T00:00:00.000Z" agent="5.0" version="22.1.16" etag="sequence-create" type="device">
  <diagram name="Create Permit Flow" id="create-flow">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Actors/Components -->
        <mxCell id="visitor" value="Visitor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="60" y="40" width="30" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="frontend" value="Frontend&#xa;(PermitForm)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="180" y="40" width="100" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="controller" value="Controller&#xa;(WorkingPermit)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="340" y="40" width="110" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="permitService" value="Service&#xa;(PermitCreation)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="510" y="40" width="110" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="userService" value="Service&#xa;(User)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="680" y="40" width="100" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="approvalService" value="Service&#xa;(ApprovalCreation)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="840" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="notificationService" value="Service&#xa;(Notification)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="1020" y="40" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- Lifelines -->
        <mxCell id="ll-visitor" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1" source="visitor">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="75" y="750" as="sourcePoint" />
            <mxPoint x="75" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="ll-frontend" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1" source="frontend">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="230" y="750" as="sourcePoint" />
            <mxPoint x="230" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="ll-controller" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1" source="controller">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="395" y="750" as="sourcePoint" />
            <mxPoint x="395" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="ll-permitService" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1" source="permitService">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="565" y="750" as="sourcePoint" />
            <mxPoint x="565" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="ll-userService" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1" source="userService">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="730" y="750" as="sourcePoint" />
            <mxPoint x="730" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="ll-approvalService" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1" source="approvalService">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="900" y="750" as="sourcePoint" />
            <mxPoint x="900" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="ll-notificationService" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1" source="notificationService">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1070" y="750" as="sourcePoint" />
            <mxPoint x="1070" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Messages -->
        <mxCell id="msg1" value="1: Fill permit form" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="75" y="140" as="sourcePoint" />
            <mxPoint x="230" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg2" value="2: Select PIC from dropdown" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="75" y="170" as="sourcePoint" />
            <mxPoint x="230" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg3" value="3: GET /api/users/by-role/PIC" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="230" y="200" as="sourcePoint" />
            <mxPoint x="395" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg4" value="4: List&lt;User&gt; (PICs)" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="395" y="230" as="sourcePoint" />
            <mxPoint x="230" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg5" value="5: Submit form" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="75" y="270" as="sourcePoint" />
            <mxPoint x="230" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg6" value="6: POST /api/permits?visitorId={id}&#xa;{permitData}" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="230" y="300" as="sourcePoint" />
            <mxPoint x="395" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg7" value="7: createPermit(permitRequest, visitorId)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="395" y="330" as="sourcePoint" />
            <mxPoint x="565" y="330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg8" value="8: findById(visitorId)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="565" y="360" as="sourcePoint" />
            <mxPoint x="730" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg9" value="9: User (visitor)" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="730" y="390" as="sourcePoint" />
            <mxPoint x="565" y="390" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg10" value="10: findById(picId)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="565" y="420" as="sourcePoint" />
            <mxPoint x="730" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg11" value="11: User (PIC)" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="730" y="450" as="sourcePoint" />
            <mxPoint x="565" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg12" value="12: generatePermitNumber()" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="565" y="480" as="sourcePoint" />
            <mxPoint x="565" y="480" as="targetPoint" />
            <Array as="points">
              <mxPoint x="625" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg13" value="13: Create WorkingPermit entity&#xa;status = PENDING_PIC" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="565" y="510" as="sourcePoint" />
            <mxPoint x="565" y="510" as="targetPoint" />
            <Array as="points">
              <mxPoint x="625" y="510" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg14" value="14: save(permit)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="565" y="540" as="sourcePoint" />
            <mxPoint x="565" y="540" as="targetPoint" />
            <Array as="points">
              <mxPoint x="625" y="540" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg15" value="15: createPICApproval(permit, pic)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="565" y="570" as="sourcePoint" />
            <mxPoint x="900" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg16" value="16: Create Approval entity&#xa;type = PIC_REVIEW&#xa;status = PENDING" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="900" y="600" as="sourcePoint" />
            <mxPoint x="900" y="600" as="targetPoint" />
            <Array as="points">
              <mxPoint x="960" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg17" value="17: Approval saved" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="900" y="630" as="sourcePoint" />
            <mxPoint x="565" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg18" value="18: notifyPICForReview(permit, pic)" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="565" y="660" as="sourcePoint" />
            <mxPoint x="1070" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg19" value="19: Send email notification to PIC" style="html=1;verticalAlign=bottom;endArrow=block;rounded=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="1070" y="690" as="sourcePoint" />
            <mxPoint x="1070" y="690" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1130" y="690" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg20" value="20: WorkingPermit created" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="565" y="720" as="sourcePoint" />
            <mxPoint x="395" y="720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg21" value="21: Response (permit created)" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="395" y="750" as="sourcePoint" />
            <mxPoint x="230" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg22" value="22: Display success &amp;&#xa;permit number" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="230" y="780" as="sourcePoint" />
            <mxPoint x="75" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Notes -->
        <mxCell id="note1" value="Note: Permit Number Format:&#xa;WP-YYYY-MM-XXXXX&#xa;Example: WP-2026-01-00001" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#ffe6cc;strokeColor=#d79b00;size=15;align=left;" vertex="1" parent="1">
          <mxGeometry x="40" y="820" width="220" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="note2" value="Initial Status: PENDING_PIC&#xa;Equipment list, visit purpose,&#xa;scheduled time, and data center&#xa;are captured in the form" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#d5e8d4;strokeColor=#82b366;size=15;align=left;" vertex="1" parent="1">
          <mxGeometry x="300" y="820" width="220" height="80" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
